# HSE Blockchain Lab. Homework 3

Author: Alexey Perevyshin

# ДЗ-4 "Взаимодействие со СмК"

## Предварительная настройка

Для работы с клиентом потребуются следующие параметры в файле `client_python/.env`

```
* INFURA_API_KEY — API токен для взаимодействия с infura
* CONTRACT_ADDRESS — адрес контракта, с которым будут производиться операции
* PRIVATE_KEY — приватный ключ аккаунта, который может взаимодействовать со смартконтрактом
```

Для работы с `abi` смартконтракта используется файл, созданный при помощи `hardhat` и хранящийся по такому пути `artifacts/contracts/HSEToken.sol/HSEToken.json`. Для удобства он также добавлен в папку `client_python`.

## Пример использования

Для запуска клиента используется такая команда:
```
python3 ./client_python/client.py
```

Дальше взаимодействие происходит при помощи написания команды, которую мы хотим выполнить, а также параметров для ее выполнения.

Пример взаимодействия (ответы программы выводятся с `>` в начале ответа)

```
set 1 Alex 10 True
> Set transaction: https://goerli.etherscan.io/tx/0xf4579d2334419fb36a182d4e6adbeff26dde135b17ac55f59ab6ac15c963a234
get 1
> Get result. Name: Alex, mark: 10, isLanguageJS: True
set 2 Alex 100 True
> Set transaction: https://goerli.etherscan.io/tx/0x29d8f22f653e5f1f3fd97d26907d7289812fdebc699eab1830992e9de1661f7a
get 2
> Get result. Name: Alex, mark: 100, isLanguageJS: True
delete 2
> Delete transaction: https://goerli.etherscan.io/tx/0xf63534fa33301434a2671ec69ead75391e3fc7d5e66f437eb57106a546be44b3
get 2
> Get result. Name: , mark: 0, isLanguageJS: False

```

# Ответы на вопросы

## Какие есть расширения для обозревателя, которые умеют взаимодействовать с Ethereum?

Приложения, которые могут взаимодействовать с блокчейном Ethereum, используются для решения задач разного вида. Вот наиболее популярные способы их использования и сами приложения

* [MetaMask](https://metamask.io/) - расширение для браузера, которое позволяет пользователям создавать и управлять Ethereum-кошельком, а также использовать децентрализованные приложения на блокчейне Ethereum.

* [MyEtherWallet](https://www.myetherwallet.com/) - еще одно расширение для браузера, которое позволяет пользователям создавать и управлять Ethereum-кошельками отправлять и принимать Ethereum, токены ERC-20 и NFT.

* [EtherScan](https://etherscan.io/) - сайт, который позволяет пользователям просматривать информацию о транзакциях, блоках, адресах и токенах Ethereum.

* [Infura](https://www.infura.io/) - расширение, которое предоставляет доступ к инфраструктуре Ethereum через API, позволяя разработчикам создавать децентрализованные приложения.


## Что делает MetaMask, чтобы web-приложение могло взаимодействовать с блокчейном через JavaScript?

MetaMask использует JavaScript API, который предоставляет доступ к блокчейну Ethereum через инфраструктуру Web3.js, которая является библиотекой JavaScript для взаимодействия с блокчейном Ethereum.MetaMask создает локальную ноду Ethereum, которая позволяет браузеру взаимодействовать с блокчейном Ethereum через API Web3.js. Когда пользователь взаимодействует с веб-приложением, приложение отправляет запросы на локальную ноду Ethereum через API Web3.js. Локальная нода Ethereum обрабатывает запросы и возвращает результаты в приложение.

## Каким образом обрабатываются пользовательские данные в web-приложении, чтобы они были приняты блокчейном?

Для того чтобы пользовательские данные могли быть приняты блокчейном, необходимо выполнить несколько шагов.

1. Конвертация данных в формат, совместимый с блокчейном. Данные должны быть преобразованы в формат, который может быть записан в блокчейн, например, в виде транзакции.

1. Проверка данных на соответствие правилам блокчейна. Данные должны соответствовать определенным правилам, установленным блокчейном, например, что у пользователя достаточно денег на счете.

1. Создание транзакции и ее отправка в блокчейн.

1. Обновление состояния блокчейна. После того, как транзакция будет подтверждена и включена в блок, состояние блокчейна будет обновлено с учетом новых данных.

## Какие есть способы взаимодействия с блокчейном, кроме RPC-сервера и в чём их особенность? 

1. Веб-интерфейс: некоторые блокчейны имеют веб-интерфейс, который позволяет пользователям взаимодействовать с блокчейном через браузер. Это может включать в себя просмотр информации о транзакциях и блоках, отправку транзакций и выполнение других функций.

1. SDK: с помощью SDK можно создавать приложения и программное обеспечение, которые взаимодействуют с блокчейном. SDK предоставляют различные инструменты и библиотеки, которые упрощают работу с блокчейном.

1. Консольный интерфейс: консольный интерфейс позволяет пользователям взаимодействовать с блокчейном через командную строку (например, отправка `http` запросов при помощи `curl`). Это может включать в себя отправку транзакций, получение информации о блоках и другие функции.

Каждый из этих способов имеет свои особенности и может быть более или менее удобным в зависимости от конкретной ситуации. Например, веб-интерфейс может быть удобен для пользователей без опыта работы с командной строкой, тогда как SDK может быть полезен для разработчиков, которые создают приложения, использующие блокчейн.

## Какие есть ещё способы получения данных из блокчейна, кроме отправка call методов и событий?

С помощью web3.js, библиотеки для взаимодействия с блокчейном Ethereum из JavaScript, можно вызывать различные функции для получения данных из блокчейна.

Например, можно получить баланс Ethereum-адреса с помощью функции `getBalance`, также можно получить информацию о блоке с помощью функции `getBlock`,
еще можно получить информацию о транзакции с помощью функции `getTransaction`.

Это только несколько примеров возможностей web3.js, полный список можно найти тут https://web3js.readthedocs.io/en/v1.5.2/web3-eth.html